<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>The Chronicle</title>
		<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='styles.css')}}">
		<link rel="stylesheet" type="text/css" href="{{url_for('static', filename = 'bootstrap.min.css')}}">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
	</head>
	<body>
		<header>
			<section class="header_inner">
				<a href="{{url_for('showCategories')}}" class="logo"><h1>The Chronicle</h1></a>
				<div class="profile_info">
					<div class="dropdown_menu">
						<a href="{{url_for('showAuthor', author_id = profile_id)}}">Author Menu</a><br><br>
						<a href="{{url_for('gdisconnect')}}">Logout</a>
					</div>
					<img src="{{profile_pic}}" class="profile_pic">
					<script type="text/javascript">
						$(".profile_pic").on("click", function() {
							console.log("profile pic was clicked");
							$(".dropdown_menu").toggleClass('show_dropdown');
						});
					</script>
				</div>
			</section>
		</header>
		<nav>
			{% for c in categories: %}
				<a href="{{url_for('showCatalog', category_id = c.id)}}" class="nav_item" id="{{c.name}}_nav_item"><h3>{{c.name}}</h3></a>
				{% endfor %}
		</nav>
		<div class = 'flash'>
			{% with messages = get_flashed_messages() %}
				{% if messages %}
					{% for message in messages %}
						<strong> {{ message }} </strong>
						{% endfor %}
					{% endif %}
				{% endwith %}
		</div>
		<main>
			<div class="author_header">
				<img src="{{author.picture}}" id="author_header_image">
				<h2 id="author_header_name">{{author.name}}</h2>
			</div>
			<div class = "content">
			{% for article in articles: %}
				<article id="{{article.category.name}}_card" style="background-image: url({{article.picture}});">
					<div class="article_overlay">
						<a href="{{url_for('showArticle', category_id = article.category_id, article_id = article.id)}}" class="article_title">
							<h3>{{article.title}}</h3>
							<time datetime="{{article.date}}" class="article_date"></time>
						</a>
						<script>
							var datestring = $(".article_date").attr("datetime");
							datestring = datestring.slice(0, 19);
							datestring = datestring.replace(" ", "T");
							$(".article_date").attr("datetime", datestring);
							var d = new Date(datestring);
							d = d.toString();
							d = d.slice(4, 10) + "," + d.slice(10,15) + " (" + d.slice(16,21) + " " + d.slice(35);
							$(".article_date").text(d);
						</script>
					</div>
				</article>
				{% endfor %}
			</div>
		</main>
		<footer>
		</footer>
	</body>
</html>